<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head>
	<title>Registration Form</title>
	<link rel="stylesheet" type="text/css" th:href="@{/css/registration.css}" />
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<link href="https://fonts.googleapis.com/css?family=Baloo|Indie+Flower|Noto+Sans" rel="stylesheet">
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/bootstrap-theme.css" media="screen">
	<link rel="stylesheet" href="css/style.css">
  	<link rel="stylesheet" href="css/style2.css">
  	<link rel="stylesheet" type="text/css" href="css/cLogo.css">
  	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  	
</head>
<body>
	
	<form th:action="@{/login}" method="get">
		<button class="btn btn-md btn-warning btn-block" type="Submit">Go To Login Page</button>
	</form>	
	
	<div class="container">
		<div class="row">
			<h1 id="center-tag-login" class="Margin-Tag-Buttom"> Join US :) </h1>
			<div class="col-md-12">
				<div class="Left-Tag-Login col-md-5">
					<!--  <div>
							<p id="center-tag-login">Hello</p>
						  </div>
					-->
				</div>

				<div class="col-md-5 right-Tag-Login">
					<form autocomplete="off" th:action="@{/register}" onsubmit="return validateForm()"
					 th:object="${user}" method="post" class="form-horizontal"
						role="form" name="myform">
						<h3 class="form-signin-heading" th:text="Welcome"></h3> <br/>
						<p id="error" style ="color :red"></p>

						<div class="form-signin-div" >
							<div class="col-sm-9">
								<p>First Name</p>
								<label th:if="${#fields.hasErrors('firstName')}" th:errors="*{firstName}" class="validation-message"></label>
								<input type="text" th:field="*{firstName}" placeholder="Name" id="FName" name="FName" class="form-control" />
							</div>
						</div>

						<div class="form-signin-div" >
							<div class="col-sm-9">
								<p>Last Name</p>
								<label th:if="${#fields.hasErrors('lastName')}" th:errors="*{lastName}" class="validation-message"></label>
								<input type="text" th:field="*{lastName}" placeholder="Name" id="LName" name="LName" class="form-control" />
							</div>
						</div>
						
						<div class="form-signin-div" >
							<div class="col-sm-9">
								<p>User Name</p>
								<label th:if="${#fields.hasErrors('userName')}" th:errors="*{userName}" class="validation-message"></label>
								<input type="text" th:field="*{userName}" placeholder="User Name" id="UName" name="UName" class="form-control" />
							</div>
						</div>
						
						<div class="form-signin-div" >
							<div class="col-sm-9">
								<p>Password</p>
								<label th:if="${#fields.hasErrors('password')}" th:errors="*{password}" class="validation-message"></label>
								<input type="password" th:field="*{password}" placeholder="Password" id="password1" name="password1" class="form-control" />
							</div>
						</div>
						
						<div class="form-signin-div" >
							<div class="col-sm-9">
								<p>Confirm Password</p>
								<input type="password" placeholder="Confirm Password" id="password2" name="password2" class="form-control" />
							</div>
						</div>

						<div class="form-signin-div" >
							<div class="col-sm-9">
								<p>Email</p>
								<label th:if="${#fields.hasErrors('email')}" th:errors="*{email}" class="validation-message"></label>
								<input type="text" th:field="*{email}" placeholder="Your Email" id="Email" name="Email" class="form-control" />
							</div>
						</div>
						
						<div class="form-signin-div" >
							<div class="col-sm-9">
								<p>Birthday</p>
								<input type="date" id="date1" name="date1" class="form-control Form-Tag-Input" min="1950-01-01" max="2015-12-31" required/>
							</div>
						</div>
						
						<div class="form-signin-div" >
							<div class="col-sm-9">
								<p>Age</p>
								<label th:if="${#fields.hasErrors('age')}" th:errors="*{age}" class="validation-message"></label>
								<input type="text" th:field="*{age}" placeholder="Age" id="Age" name="Age" class="form-control" />
							</div>
						</div>
						
						<div class="form-signin-div" >
							<div class="col-sm-9">
								<p>Type</p>
								<label th:if="${#fields.hasErrors('type')}" th:errors="*{type}" class="validation-message"></label>
								<input type="text" th:field="*{type}" placeholder="Type" id="Type" name="Type" class="form-control" />
							</div>
						</div>

						<div class="form-signin-div" >
							<div class="col-sm-9">
								<p>Gender</p>
								<label th:if="${#fields.hasErrors('gender')}" th:errors="*{gender}" class="validation-message"></label> 
								<input type="text" th:field="*{gender}" placeholder="Gender" id="Gender" name="Gender" class="form-control" style = "margin-bottom:20px" /> 
							</div>
						</div>
						

						<!--
						<div class="col-xs-12 Form-Tag-Input023">
						<div class="form-signin-div" >
						<div class="col-xs-4">
						<p id="Form-Tag-Input">Type</p>
						<div id="type-group" class="Radio-Tag-Form">
							 
							 <select th:field="*{type}">
								  <option selected="selected" value="1">student</option>
								  <option value="2">teacher</option>
							</select>
							
						</div>
						</div>
						</div>
						<div class="form-signin-div" >
						<div class="col-xs-4">
						<p id="Form-Tag-Input">Gender</p>
						<div id="gender-group" class="Radio-Tag-Form">

							<select th:field="*{gender}">
								  <option selected="selected" value="1">male</option>
								  <option value="2">female</option>
							</select>					
						</div>
						</div>
						</div>
						</div>				
						-->
						<div align="center" th:if="${param.error}">
						<p style="font-size: 20; color: #FF1C19;" hidden>Email or Password invalid, please verify</p>
						</div>
						
						<div class="form-signin-div" >
							<div class="col-sm-9">
								<button type="submit" class="btn btn-primary btn-block">Register User</button>
							</div>
						</div>
						
						<span th:utext="${successMessage}"></span>
						
					</form>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
	function validateForm() {
	    var x = document.forms["myform"]["FName"].value;
	    var y = document.forms["myform"]["LName"].value;
	    var z = document.forms["myform"]["Email"].value;
	    var p1 = document.forms["myform"]["password1"].value;
	    var p2 = document.forms["myform"]["password2"].value;
	    var i=0;
	    var counter=0;
	    var text = "";
	    if ((x == "") || (y =="") || (z=="") || (p1=="") || (p2=="")) {
	        return false;
	    }
	    else{
	    	for (i = 0; i < x.length; i++) {
	    		var c = x[i];
	    		
	   			if (c >= '0' && c <= '9') {
    				document.getElementById("error").innerHTML = 'Invalid Name. Name Must only contain characters from [A-Za-z]';
    				return false;
    			}
    			else if(c == ' '){
    				document.getElementById("error").innerHTML = 'Invalid Name. Name Must only contain characters from [A-Za-z]';
    				return false;
    			}
    			else if(c < 'A' || c > 'z'){
    				document.getElementById("error").innerHTML = 'Invalid Name. Name Must only contain characters from [A-Za-z]';
    				return false;
    			}
			}
			for (i = 0; i < y.length; i++) {
	    		var c2 = y[i];
	    		
	   			if (c2 >= '0' && c2 <= '9') {
    				document.getElementById("error").innerHTML = 'Invalid Name. Name Must only contain characters from [A-Za-z]';
    				return false;
    			}
    			else if(c2 == ' '){
    				document.getElementById("error").innerHTML = 'Invalid Name. Name Must only contain characters from [A-Za-z]';
    				return false;
    			}
    			else if(c2 < 'A' || c2 > 'z'){
    				document.getElementById("error").innerHTML = 'Invalid Name. Name Must only contain characters from [A-Za-z]';
    				return false;
    			}
			}

			if(z.includes('@')){
				var atcounter = 0;
				var dotcounter = 0;
				var atIndex = 0;
				var dotIndex = 0;
				for(i=0;i<z.length;i++){
					var c3 = z[i];
					if(c3 == ' '){
						document.getElementById("error").innerHTML = 'Invalid Email. Email must not contain spaces';
    					return false;
					}
					else if(c3 == '@'){
						atIndex = i;
						atcounter++;
					}
					else if(c3 == '.'){
						dotIndex = i;
						dotcounter++;
					}
				}
				if((atcounter > 1) || (dotcounter>2 || dotcounter<1) || (dotIndex<atIndex)){
					document.getElementById("error").innerHTML = 'Invalid Email. Email must be like "User@hotmail.com"';
    				return false;
				}
			}
			else{
					document.getElementById("error").innerHTML = 'Invalid Email. Email must be like "User@hotmail.com"';
    				return false;
			}

			if(p1.length < 8 || p2.length < 8){
				document.getElementById("error").innerHTML = 'Invalid Password. password must be at least 8 characters';
    			return false;
			}
			else if(p1 != p2){
				document.getElementById("error").innerHTML = 'Invalid Password. passwords doesnt match';
    			return false;
			}
			
	    }
	    

	}
		
</script>


</body>
</html>